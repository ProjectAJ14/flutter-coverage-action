name: ğŸ¯ Flutter Coverage Magic
description: |
  âœ¨ A magical Github action that keeps an eye on your Flutter coverage! 
  ğŸ“Š Analyze your tests, check your coverage, and even deploy beautiful 
  reports to Github Pages with style! â­
author: ğŸ‘¨â€ğŸ’» ProjectAJ14

branding:
  icon: thumbs-up    # ğŸ‘ Because we're awesome!
  color: blue        # ğŸŒŠ Ocean blue vibes

inputs:
  use-melos:
    description: ğŸ° Enable Melos powers for your mighty mono-repo kingdom!
    required: false
    default: 'false'
  debug:
    description: ğŸ” Turn on the detective mode for super-detailed troubleshooting
    required: false
    default: 'false'

runs:
  using: composite
  steps:
    - name: ğŸªŸ Windows Special Setup
      if: runner.os == 'Windows'
      shell: bash
      run: |
        echo "ğŸ”§ Installing yq parser for Windows wizardry..."
        choco install yq

    - name: ğŸ” Grant Script Powers
      shell: bash
      run: chmod +x "$GITHUB_ACTION_PATH/src/script.sh"
      # ğŸ­ Making our script executable and ready for action!

    - name: ğŸš€ Launch Coverage Mission
      id: flutter-coverage-action
      shell: bash
      run: |
        $GITHUB_ACTION_PATH/src/script.sh \
          -f '${{ inputs.use-melos }}' \
          ${{ inputs.debug == 'true' && '-p' || '' }}
      # ğŸª Let the coverage analysis begin!