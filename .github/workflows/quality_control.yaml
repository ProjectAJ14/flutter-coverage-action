name: 🧪 Quality Control

on:
  workflow_dispatch:  # 🎯 Manual trigger
  push:              # 🚀 Auto-trigger on push
    branches:
      - main         # 👑 Main branch
      - alpha          # 🛠️ Alpha branch
  pull_request:      # 🤝 PR checks
    branches:
      - main         # 🎯 Target branch

jobs:
  shell_detective:   # 🔍 Shell script inspection time!
    runs-on: ubuntu-latest
    steps:
      - name: 📥 Fetch the Code
        uses: actions/checkout@v4

      - name: 🕵️ Shell Script Investigation
        uses: ludeeus/action-shellcheck@master
        # 🧐 Making sure our shell scripts are squeaky clean!

  action_adventure:  # 🎮 Testing our action
    runs-on: ubuntu-latest
    steps:
      - name: 📦 Clone the Goodies
        uses: actions/checkout@v4

      - name: 🎯 Run Flutter Coverage Action
        id: flutter-coverage-action
        uses: ./
        with:
          coverage_base_dir: 'example'
          max_reports: '100'
          debug_mode: '1'
          comment_on_pr: 'true'
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        
